{
  "name": "GrammyAi Dev Container",
  "dockerFile": "Dockerfile",
  "context": "..",
  "appPort": [3000],
  "postCreateCommand": "npm install",
  "remoteUser": "node",
  "features": {
    "ghcr.io/devcontainers/features/node:1": {
      "version": "18"
    }
  },
  "settings": {
    "terminal.integrated.shell.linux": "/bin/bash"
  },
  "mounts": [
    "source=${localWorkspaceFolder},target=/workspace,type=bind,consistency=cached"
  ]
}
# Base image with Node.js LTS
FROM mcr.microsoft.com/devcontainers/javascript-node:0-18

# Set working directory
WORKDIR /workspace

# Copy package.json and package-lock.json first (for caching npm install)
COPY ../package*.json ./

# Install dependencies
RUN npm install

# Copy the rest of the app
COPY ../ ./

# Expose Next.js port
EXPOSE 3000

# Default command to start dev server
CMD ["npm", "run", "dev"]